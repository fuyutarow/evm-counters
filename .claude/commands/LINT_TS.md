* as castが多すぎます。type inferecne first or satisfiesにできませんか？
* nullishは??にして
* ""を使う前に undefinedや nullの方が適切ではないか検討しましたか
* ネストされた3項演算子は ts-patternにしてください
